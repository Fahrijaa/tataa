<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Memori Kita</title>
<link rel="stylesheet" href="css/halaman2.css">
</head>

<body>

<div class="wrapper">
    <div class="card">

        <!-- KIRI -->
        <div class="left">
            <img src="asset/vinyl.png" class="vinyl" id="vinyl" alt="Vinyl">

            <!-- MUSIC CONTROL -->
            <div class="music-control">
                <button id="playBtn">PLAY</button>
                <button id="stopBtn">STOP</button>
            </div>

            <audio id="music" src="asset/musik.mp3"></audio>
        </div>

        <!-- KANAN -->
        <div class="right">
            <h1>MEMORI KITA</h1>
            <p class="subtitle">KLIK UNTUK BACA CERITA LENGKAPNYA</p>

            <div class="list">
                <div class="item">
                    <span class="date">12.08.2025</span>
                    <a href="cerita1.html">1. Pertemuan Tak Disengaja</a>
                </div>

                <div class="item">
                    <span class="date">12.08.2025</span>
                    <a href="cerita2.html">2. Obrolan Di Tengah Malam</a>
                </div>

                <div class="item">
                    <span class="date">12.25.2025</span>
                    <a href="cerita3.html">3. I LOVE U TATAA</a>
                </div>

                <div class="item">
                    <span class="date">12.08.2025</span>
                    <a href="cerita4.html">4. Langkah Baru</a>
                </div>
            </div>
        </div>

    </div>
</div>

<script>
const music = document.getElementById('music');
const playBtn = document.getElementById('playBtn');
const stopBtn = document.getElementById('stopBtn');
const vinyl = document.getElementById('vinyl');

/* LOAD STATE */
window.addEventListener('load', () => {
    const isPlaying = localStorage.getItem('music_playing');
    const musicTime = localStorage.getItem('music_time');

    if(musicTime){
        music.currentTime = parseFloat(musicTime);
    }

    if(isPlaying === 'true'){
        music.play();
        vinyl.style.animationPlayState = 'running';
    }else{
        vinyl.style.animationPlayState = 'paused';
    }
});

/* PLAY (RESUME) */
playBtn.onclick = () => {
    const musicTime = localStorage.getItem('music_time');
    if(musicTime){
        music.currentTime = parseFloat(musicTime); // resume
    }

    music.play();
    vinyl.style.animationPlayState = 'running';
    localStorage.setItem('music_playing', 'true');
};

/* PAUSE (TIDAK RESET) */
stopBtn.onclick = () => {
    music.pause();
    vinyl.style.animationPlayState = 'paused';
    localStorage.setItem('music_playing', 'false');
    // âŒ TIDAK reset currentTime
};

/* SAVE TIME */
setInterval(() => {
    if(!music.paused){
        localStorage.setItem('music_time', music.currentTime);
    }
}, 500);
</script>


</body>
</html>
